# AOC 2025 Day 5


``` r
library(readr)
library(dplyr)
```


    Attaching package: 'dplyr'

    The following objects are masked from 'package:stats':

        filter, lag

    The following objects are masked from 'package:base':

        intersect, setdiff, setequal, union

``` r
library(tidyr)
library(stringr)
library(purrr)
```

``` r
dat_in <- read_lines(here::here("Inputs", glue::glue("{if_else(params$test, 'test-', '')}input-day{params$day}.txt")))

ing_ids <- dat_in |> str_subset("\\d+-\\d+") |> str_split("-") |> map(as.numeric) 
avail_ings <- dat_in |> str_subset("^\\d+$") |> as.numeric()
```

# Part 1

``` r
# check_ingredient <- function(x){
#   any(map_lgl(ing_ids, ~between(x, .x[1], .x[2])))
# }
# fresh <- avail_ings |> map_lgl(check_ingredient)
# sum(fresh)
```

# Part 2

``` r
starts <- map_dbl(ing_ids, first)
ends <- map_dbl(ing_ids, last)
reord <- order(starts)
starts <- starts[reord]
ends <- ends[reord]

ranges <- NULL
currange <- c(starts[1], ends[1])
for (i in seq(2, length(starts))){
  
  if (any(between(currange, starts[i], ends[i]))|
      any(between(c(starts[i], ends[i]), currange[1], currange[2]))){
    # overlapping ranges
    currange[2] <- max(currange[2], ends[i])
  } else{
    # non-overlapping ranges
    ranges <- rbind(ranges, unname(currange))
    currange <- c(starts[i], ends[i])
  }
}
if (i==length(starts)){
  ranges <- rbind(ranges, unname(currange))
}

sum(ranges[,2]-ranges[,1]+1) |> print(digits=20)
```

    [1] 355555479253787

``` r
ranges |> print(digits=20)
```

                     [,1]            [,2]
     [1,]   3672218268426   9069958349825
     [2,]  12440214380075  19413829756369
     [3,]  24396986945805  29009989981082
     [4,]  32783805912506  34889394659117
     [5,]  34889394659118  37852045203256
     [6,]  41190120499524  48710502110828
     [7,]  53011962076696  58576758868523
     [8,]  61434917885505  62882231057991
     [9,]  63641646788533  63945948546021
    [10,]  64713316693400  66283299959280
    [11,]  66422129062863  66711994098586
    [12,]  67160465476009  67649438641309
    [13,]  68057027039766  68454649435444
    [14,]  68727093315072  69401400390266
    [15,]  69696292125615  70040914201079
    [16,]  73412860995201  78319783604609
    [17,]  80800364897743  90314897336701
    [18,]  92985559435331  99083983384255
    [19,]  99083983384256  99083983384256
    [20,] 104580961113313 109652180451852
    [21,] 114292754379846 114292754379846
    [22,] 114292754379847 118122243442587
    [23,] 121847024509459 126345620041267
    [24,] 126345620041269 129628037616258
    [25,] 132182495488136 138821293926430
    [26,] 143154545648377 148152467497972
    [27,] 151246265148187 151690444980057
    [28,] 152000130191943 152486238796869
    [29,] 153470274802250 154247928476913
    [30,] 154610263545675 155018832807006
    [31,] 155719620755384 156378640409574
    [32,] 156770859353106 157228370844559
    [33,] 157444284967581 157743465985657
    [34,] 157966143122749 159131956260867
    [35,] 159774306485562 160419960771595
    [36,] 163807315460788 169629548448978
    [37,] 171431709160547 180222947242739
    [38,] 183175626133351 189172211000972
    [39,] 193355047594087 195991726717559
    [40,] 195991726717561 200347594718591
    [41,] 203275761047276 207893046967514
    [42,] 213743501161200 213743501161200
    [43,] 213743501161201 219471291456959
    [44,] 221359789392478 230955409924473
    [45,] 232121351950005 235682381324439
    [46,] 235682381324440 239428507922589
    [47,] 244484473250009 249824444617715
    [48,] 251886663550811 259311991697339
    [49,] 263685821321516 270464997549766
    [50,] 270464997549767 270464997549767
    [51,] 272979306019768 280055074059068
    [52,] 282126028703430 290905691766532
    [53,] 293047529057561 299710639297794
    [54,] 302406550101741 307193970359994
    [55,] 307193970359996 309957481846034
    [56,] 314744608126757 318669297711175
    [57,] 323855611951188 327225842492665
    [58,] 333121507005172 333121507005172
    [59,] 333121507005173 341135415342898
    [60,] 344389995827602 347299925469181
    [61,] 347299925469182 350731461622425
    [62,] 353087698181504 361406479744402
    [63,] 364359970290004 369109081626630
    [64,] 369109081626631 369109081626631
    [65,] 374010991378735 379580541653265
    [66,] 384957836075964 385057316204755
    [67,] 385597213338484 386130309524989
    [68,] 386858817856261 387699738663307
    [69,] 388351876706917 388578461376678
    [70,] 389120143291068 389941649666180
    [71,] 390250299542523 390843409397977
    [72,] 392162789636707 402020110303086
    [73,] 404052468013478 411059540873663
    [74,] 414893276002289 420734433214551
    [75,] 424331863324814 430824287436457
    [76,] 430824287436458 430824287436458
    [77,] 432956413748504 436351058276903
    [78,] 436351058276905 441549428537929
    [79,] 442807002499434 451270889383530
    [80,] 456177793236387 461879349449355
    [81,] 462503261552047 472406223184007
    [82,] 472788183962691 480272823246663
    [83,] 486438625661094 489174884685392
    [84,] 495774309849622 495774309849622
    [85,] 495774309849623 500237151028475
    [86,] 506719917120116 509378158464998
    [87,] 515616143391792 518765954978806
    [88,] 518765954978807 520809013033287
    [89,] 522880293422404 523179474172233
    [90,] 523401105399726 524032209716334
    [91,] 524317721420090 525444885761624
    [92,] 526293793744803 526800435871324
    [93,] 528809160802420 529739126171581
    [94,] 529805857574316 530354749652142
    [95,] 533093622413503 542001885354658
    [96,] 544514849402253 552132613556960
    [97,] 553905700373062 561794342755365
