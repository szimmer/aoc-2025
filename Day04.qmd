---
format: gfm
params:
  test: false
  day: 4
title: "AOC 2025 Day `r params$day`"
---

```{r}
#| label: load-pack
library(readr)
library(dplyr)
library(tidyr)
library(stringr)
library(purrr)
```


```{r}
#| label: read-parse

dat_in <- read_lines(here::here("Inputs", glue::glue("{if_else(params$test, 'test-', '')}input-day{params$day}.txt")))

dat <- str_split(dat_in, "", simplify = TRUE) 

```

# Part 1

```{r}
#| label: part1

check_access <- function(i, j){
  if (dat[i, j]!="@"){
    return(NA)
  } else{
    ir <- seq(max(i-1, 1), min(i+1, nrow(dat)))
    jr <- seq(max(j-1, 1), min(j+1, ncol(dat)))
    (sum(dat[ir, jr]=="@")-1) < 4
  }
}

datout <- matrix(NA, nrow=nrow(dat), ncol=ncol(dat))

for (idxr in 1:nrow(dat)){
  for (idxc in 1:ncol(dat)){
    datout[idxr, idxc] <- check_access(idxr, idxc)
  }
}

sum(datout, na.rm=TRUE)
```

